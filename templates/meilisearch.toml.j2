# This file shows the default configuration of Meilisearch.
# All variables are defined here: https://www.meilisearch.com/docs/learn/configuration/instance_options#environment-variables

# Designates the location where database files will be created and retrieved.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#database-path
db_path = "{{ meilisearch_cfg.db_path }}"

# Configures the instance's environment. Value must be either `production` or `development`.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#environment
env = "{{ meilisearch_cfg.env }}"

# The address on which the HTTP server will listen.
http_addr = "{{ meilisearch_cfg.http_addr }}"

# Sets the instance's master key, automatically protecting all routes except GET /health.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#master-key
# master_key = "YOUR_MASTER_KEY_VALUE"
{% if meilisearch_cfg.master_key is defined -%}
master_key = "{{ meilisearch_cfg.master_key }}"
{% endif %}

# Deactivates Meilisearch's built-in telemetry when provided.
# Meilisearch automatically collects data from all instances that do not opt out using this flag.
# All gathered data is used solely for the purpose of improving Meilisearch, and can be deleted at any time.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#disable-analytics
# no_analytics = true
{% if meilisearch_cfg.no_analytics is defined -%}
no_analytics = {{ meilisearch_cfg.no_analytics | lower }}
{% endif %}

# Sets the maximum size of accepted payloads.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#payload-limit-size
http_payload_size_limit = "{{ meilisearch_cfg.http_payload_size_limit }}"

# Defines how much detail should be present in Meilisearch's logs.
# Meilisearch currently supports six log levels, listed in order of increasing verbosity:  `OFF`, `ERROR`, `WARN`, `INFO`, `DEBUG`, `TRACE`
# https://www.meilisearch.com/docs/learn/configuration/instance_options#log-level
log_level = "{{ meilisearch_cfg.log_level }}"

# Sets the maximum amount of RAM Meilisearch can use when indexing.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#max-indexing-memory
# max_indexing_memory = "2 GiB"
{% if meilisearch_cfg.max_indexing_memory is defined -%}
max_indexing_memory = "{{ meilisearch_cfg.max_indexing_memory }}"
{% endif %}

# Sets the maximum number of threads Meilisearch can use during indexing.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#max-indexing-threads
# max_indexing_threads = 4
{% if meilisearch_cfg.max_indexing_threads is defined -%}
max_indexing_threads = {{ meilisearch_cfg.import_dump }}
{% endif %}

#############
### DUMPS ###
#############

# Sets the directory where Meilisearch will create dump files.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#dump-directory
dump_dir = "{{ meilisearch_cfg.dump_dir }}"

# Imports the dump file located at the specified path. Path must point to a .dump file.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#import-dump
# import_dump = "./path/to/my/file.dump"
{% if meilisearch_cfg.import_dump is defined -%}
import_dump = "{{ meilisearch_cfg.import_dump }}"
{% endif %}

# Prevents Meilisearch from throwing an error when `import_dump` does not point to a valid dump file.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ignore-missing-dump
ignore_missing_dump = {{ meilisearch_cfg.ignore_missing_dump | lower }}

# Prevents a Meilisearch instance with an existing database from throwing an error when using `import_dump`.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ignore-dump-if-db-exists
ignore_dump_if_db_exists = {{ meilisearch_cfg.ignore_dump_if_db_exists | lower }}


#################
### SNAPSHOTS ###
#################

# Enables scheduled snapshots when true, disable when false (the default).
# If the value is given as an integer, then enables the scheduled snapshot with the passed value as the interval
# between each snapshot, in seconds.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#schedule-snapshot-creation
schedule_snapshot = {{ meilisearch_cfg.schedule_snapshot | lower }}

# Sets the directory where Meilisearch will store snapshots.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#snapshot-destination
snapshot_dir = "{{ meilisearch_cfg.snapshot_dir }}"

# Launches Meilisearch after importing a previously-generated snapshot at the given filepath.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#import-snapshot
# import_snapshot = "./path/to/my/snapshot"
{% if meilisearch_cfg.import_snapshot is defined -%}
import_snapshot = "{{ meilisearch_cfg.import_snapshot }}"
{% endif %}

# Prevents a Meilisearch instance from throwing an error when `import_snapshot` does not point to a valid snapshot file.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ignore-missing-snapshot
ignore_missing_snapshot = {{ meilisearch_cfg.ignore_missing_snapshot | lower }}

# Prevents a Meilisearch instance with an existing database from throwing an error when using `import_snapshot`.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ignore-snapshot-if-db-exists
ignore_snapshot_if_db_exists = {{ meilisearch_cfg.ignore_snapshot_if_db_exists | lower }}


###########
### SSL ###
###########

# Enables client authentication in the specified path.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-authentication-path
# ssl_auth_path = "./path/to/root"
{% if meilisearch_cfg.ssl_auth_path is defined -%}
ssl_auth_path = "{{ meilisearch_cfg.ssl_auth_path }}"
{% endif %}

# Sets the server's SSL certificates.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-certificates-path
# ssl_cert_path = "./path/to/certfile"
{% if meilisearch_cfg.ssl_cert_path is defined -%}
ssl_cert_path = "{{ meilisearch_cfg.ssl_cert_path }}"
{% endif %}

# Sets the server's SSL key files.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-key-path
# ssl_key_path = "./path/to/private-key"
{% if meilisearch_cfg.ssl_key_path is defined -%}
ssl_key_path = "{{ meilisearch_cfg.ssl_key_path }}"
{% endif %}

# Sets the server's OCSP file.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-ocsp-path
# ssl_ocsp_path = "./path/to/ocsp-file"
{% if meilisearch_cfg.ssl_ocsp_path is defined -%}
ssl_ocsp_path = "{{ meilisearch_cfg.ssl_ocsp_path }}"
{% endif %}

# Makes SSL authentication mandatory.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-require-auth
ssl_require_auth = {{ meilisearch_cfg.ssl_require_auth | lower }}

# Activates SSL session resumption.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-resumption
ssl_resumption = {{ meilisearch_cfg.ssl_resumption | lower }}

# Activates SSL tickets.
# https://www.meilisearch.com/docs/learn/configuration/instance_options#ssl-tickets
ssl_tickets = {{ meilisearch_cfg.ssl_tickets | lower }}

#############################
### Extra Setting         ###
#############################

{{ meilisearch_cfg.extra_setting | default('') }}
